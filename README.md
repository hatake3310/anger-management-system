# アンガーマネジメント記録システム

感情のパターンを客観的に把握・分析し、怒りのコントロール力（アンガーマネジメント）を向上させるための記録・分析支援システムです。

## 🎯 システムの目的

ユーザーが自身の怒りを記録し、感情のパターンを客観的に把握・分析することで、アンガーマネジメント能力を向上させることを目的としています。

## ✨ 主な機能

### セブンコラム記録機能
認知行動療法（CBT）の7つのステップに基づいた記録システム：

1. **日付** - 記録した日
2. **状況** - 具体的な出来事、場所、人物、状況
3. **感情** - その時感じた感情とその強さ（0-100%）
4. **自動思考** - 頭に浮かんだネガティブな思考や信念
5. **根拠** - その思考が事実に基づいているかの証拠
6. **反証** - その思考と矛盾する事実や例
7. **バランス思考** - より現実的で事実に基づいた思考
8. **気分の変化** - 記録前後の気分変化を数値化

### AI認知歪み検出
日本語テキストから以下の認知の歪みを自動検出：

- **ラベリング** - 否定的なレッテル貼り
- **読心** - 他人の気持ちを推測で判断
- **白黒思考** - 極端な判断、オール・オア・ナッシング
- **個人化** - 何でも自分のせいだと考える思考
- **外部化** - 何でも他人や環境のせいだと考える思考

### 分析・可視化機能
- 気分改善度の追跡
- 感情の頻度と強度分析
- 認知の歪みパターン識別
- 週次・月次トレンド分析
- データエクスポート機能（CSV）

## 🛠 技術スタック

### フロントエンド
- **React** + **TypeScript**
- **Wouter** (軽量ルーティング)
- **TanStack Query** (サーバー状態管理)
- **Tailwind CSS** + **shadcn/ui** (スタイリング)
- **React Hook Form** + **Zod** (フォーム管理・バリデーション)
- **Vite** (ビルドツール)

### バックエンド
- **Node.js** + **Express.js**
- **TypeScript**
- **PostgreSQL** (Neon Database)
- **Drizzle ORM** (データベースORM)
- **Zod** (スキーマバリデーション)

## 🚀 セットアップ

### 前提条件
- Node.js 20以上
- PostgreSQL データベース（推奨：Neon Database）

### インストール

1. リポジトリをクローン
```bash
git clone https://github.com/yourusername/anger-management-system.git
cd anger-management-system
```

2. 依存関係のインストール
```bash
npm install
```

3. 環境変数の設定
```bash
# .env ファイルを作成
DATABASE_URL=your_postgresql_connection_string
```

4. データベースのセットアップ
```bash
npm run db:push
```

5. 開発サーバーの起動
```bash
npm run dev
```

アプリケーションは `http://localhost:5000` で起動します。

## 📝 使い方

### 1. 記録作成
1. 「記録」ページに移動
2. セブンコラムフォームに必要な情報を入力
3. 感情の種類と強度を設定
4. 記録前後の気分を数値で入力
5. 保存すると自動的に認知の歪みを分析

### 2. 履歴確認
1. 「履歴」ページで過去の記録を確認
2. 期間や感情でフィルタリング可能
3. 詳細表示で各記録の内容を確認
4. CSVエクスポート機能でデータをダウンロード

### 3. 分析確認
1. 「分析」ページで統計情報を確認
2. 感情パターンのトレンドチャート
3. 認知の歪みの分布と頻度
4. 改善のヒントとアドバイス

## 🔧 スクリプト

```bash
# 開発サーバー起動
npm run dev

# 本番ビルド
npm run build

# 本番サーバー起動
npm start

# データベーススキーマプッシュ
npm run db:push
```

## 📊 システム効果

- **自動思考の可視化** - 無意識のネガティブな思い込みを客観視
- **感情パターンの発見** - 日々の記録から感情のトリガーを特定
- **改善度の測定** - 気分変化の「見える化」による対処力向上

## 🤝 コントリビューション

プルリクエストや課題報告を歓迎します。大きな変更を行う前に、まずissueを作成して議論してください。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🔒 プライバシー

このシステムは個人の感情データを扱うため、プライバシーとデータセキュリティを最優先に設計されています。